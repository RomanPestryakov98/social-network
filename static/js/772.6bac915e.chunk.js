"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[772],{7368:function(e,n,l){l.r(n),l.d(n,{default:function(){return J}});var o=l(1413),t=l(5987),s=l(6070),r=l(8687),i=l(2791),a=l(9439),u=l.p+"static/media/avatar.ff96f4143020bb9b54cc.jpg",c=l(184);var d=function(e){return(0,c.jsxs)("li",{className:"post",children:[(0,c.jsx)("img",{src:u,className:"post__avatar",alt:"avatar"}),(0,c.jsx)("p",{className:"post__message",children:e.message})]})},f=l(3545);var v=function(e){var n=e.profilePage,l=e.onSubmit;return(0,c.jsxs)("div",{className:"my-posts",children:[(0,c.jsx)("h2",{className:"my-posts__title",children:"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"}),(0,c.jsx)(f.Z,{type:"post",onSubmit:l}),(0,c.jsx)("ul",{className:"my-posts__list",children:n.posts.map((function(e,n){return(0,c.jsx)(d,{avatar:e.avatar,message:e.message},n)}))})]})};var p=(0,r.$j)((function(e){return{profilePage:e.profilePage}}),{actionAddPostCreator:s.Uf})((function(e){return(0,c.jsx)(v,(0,o.Z)((0,o.Z)({},e),{},{onSubmit:function(n){e.actionAddPostCreator(n.post)}}))})),h=l(5953);var x=function(e){var n=(0,i.useState)(e.status),l=(0,a.Z)(n,2),o=l[0],t=l[1],s=(0,i.useState)(!1),r=(0,a.Z)(s,2),u=r[0],d=r[1];return(0,i.useEffect)((function(){t(e.status)}),[e.status]),(0,c.jsx)("div",{children:u?(0,c.jsx)("input",{autoFocus:!0,onBlur:function(){e.onUpdateStatus(o),d(!1)},onChange:function(e){t(e.target.value)},value:o}):(0,c.jsx)("span",{onDoubleClick:function(){d(!0)},children:e.status?e.status:"\u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"})})},m=l(7689);function j(e){var n=e.contactKey,l=e.contactValue;return(0,c.jsxs)("li",{children:[(0,c.jsxs)("b",{children:[n,":"]})," ",l||"-"]})}var g=function(e){var n=e.contacts;return(0,c.jsx)("ul",{children:n&&Object.keys(n).map((function(e,l){return(0,c.jsx)(j,{contactKey:e,contactValue:n[e]},l)}))})},b=l(7354);var _=function(e){var n,l,o,t,s,r,i,a;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b.ZP,{type:"primary",onClick:e.onEditMode,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:[(0,c.jsx)("b",{children:"\u0418\u043c\u044f: "})," ",null!==e&&void 0!==e&&null!==(n=e.profile)&&void 0!==n&&n.fullName?null===e||void 0===e||null===(l=e.profile)||void 0===l?void 0:l.fullName:"-"]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("b",{children:"\u041e \u0441\u0435\u0431\u0435: "})," ",null!==e&&void 0!==e&&null!==(o=e.profile)&&void 0!==o&&o.aboutMe?null===e||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.aboutMe:"-"]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("b",{children:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443: "})," ",null!==e&&void 0!==e&&null!==(s=e.profile)&&void 0!==s&&s.lookingForAJob?"\u0414\u0430":"\u041d\u0435\u0442"]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("b",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b: "})," ",null!==e&&void 0!==e&&null!==(r=e.profile)&&void 0!==r&&r.lookingForAJobDescription?null===e||void 0===e||null===(i=e.profile)||void 0===i?void 0:i.lookingForAJobDescription:"-"]}),(0,c.jsxs)("li",{className:"top",children:[(0,c.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b: "}),(0,c.jsx)(g,{contacts:null===e||void 0===e||null===(a=e.profile)||void 0===a?void 0:a.contacts})]})]})]})},N=l(1134);l(5158);var P=l(376),Z=l(3254);var k=function(e){var n,l,o,t,s,r,i=(0,N.cI)({mode:"onChange"}),u=i.handleSubmit,d=i.control,f=i.setError;function v(n){e.onUpdateProfile(n).then((function(){e.onEditMode()})).catch((function(e){for(var n=function(e){var n=function(e){for(var n,l=[],o=/[^()]+(?=\))/g,t=0;t<e.messages.length;t++){var s=e.messages[t].match(o);if(-1===s[0].indexOf("->"))n=s[0].charAt(0).toLowerCase()+s[0].slice(1);else{var r=(s=s[0].replace("->",".")).split(".");n=r[0].charAt(0).toLowerCase()+r[0].slice(1)+"."+(r[1].charAt(0).toLowerCase()+r[1].slice(1))}l.push(n)}return l}(e),l=function(e){for(var n=[],l=0;l<e.messages.length;l++){var o=e.messages[l].split("(").reverse().pop();n.push(o)}return n}(e);return[n,l]}(e),l=(0,a.Z)(n,2),o=l[0],t=l[1],s=0;s<o.length;s++)f(o[s],{type:"Invalid url format",message:t[s]})}))}return(0,c.jsxs)("form",{onSubmit:u(v),className:"form",children:[(0,c.jsx)(b.ZP,{type:"primary",onClick:u(v),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,c.jsx)(N.Qr,{control:d,name:"fullName",defaultValue:null===e||void 0===e||null===(n=e.profile)||void 0===n?void 0:n.fullName,render:function(e){var n=e.field,l=n.onChange,o=n.value;return(0,c.jsxs)("label",{className:"login__label",children:[(0,c.jsx)("span",{className:"login__label-text",children:"\u0418\u043c\u044f:"}),(0,c.jsx)(P.Z,{onChange:l,value:o})]})}}),(0,c.jsx)(N.Qr,{control:d,name:"aboutMe",defaultValue:null===e||void 0===e||null===(l=e.profile)||void 0===l?void 0:l.aboutMe,render:function(e){var n=e.field,l=n.onChange,o=n.value;return(0,c.jsxs)("label",{className:"login__label",children:[(0,c.jsx)("span",{className:"login__label-text",children:"\u041e \u0441\u0435\u0431\u0435:"}),(0,c.jsx)(P.Z,{onChange:l,value:o})]})}}),(0,c.jsx)(N.Qr,{control:d,name:"lookingForAJob",defaultValue:null===e||void 0===e||null===(o=e.profile)||void 0===o?void 0:o.lookingForAJob,render:function(e){var n=e.field,l=n.onChange,o=n.value;return(0,c.jsxs)("div",{className:"checkbox",children:[(0,c.jsx)("span",{className:"form__label-text",children:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443:"}),(0,c.jsx)(Z.Z,{onChange:l,checked:o})]})}}),(0,c.jsx)(N.Qr,{control:d,name:"lookingForAJobDescription",defaultValue:null===e||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.lookingForAJobDescription,render:function(e){var n=e.field,l=n.onChange,o=n.value,t=e.fieldState.error;return(0,c.jsxs)("label",{className:"login__label",children:[(0,c.jsx)("span",{className:"login__label-text",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b:"}),(0,c.jsx)(P.Z,{onChange:l,value:o}),(0,c.jsx)("span",{className:"login__input-error",children:t&&t.message})]})}}),(0,c.jsx)("h3",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),(null===e||void 0===e||null===(s=e.profile)||void 0===s?void 0:s.contacts)&&Object.keys(null===e||void 0===e||null===(r=e.profile)||void 0===r?void 0:r.contacts).map((function(n,l){var o;return(0,c.jsx)(N.Qr,{control:d,name:"contacts.".concat(n),defaultValue:null===e||void 0===e||null===(o=e.profile)||void 0===o?void 0:o.contacts[n],render:function(e){var l=e.field,o=l.onChange,t=l.value,s=e.fieldState.error;return(0,c.jsxs)("label",{className:"login__label",children:[(0,c.jsx)("span",{className:"login__label-text",children:n}),(0,c.jsx)(P.Z,{onChange:o,value:t}),(0,c.jsx)("span",{className:"login__input-error",children:s&&s.message})]})}},l)}))]})},C=l(2351),S=l(1110),U=l(7975);var y=function(e){var n,l,t,s,r=(0,m.UO)(),u=(0,i.useState)(!1),d=(0,a.Z)(u,2),f=d[0],v=d[1],j=(0,i.useState)([]),g=(0,a.Z)(j,2),N=g[0],P=g[1];return(0,c.jsxs)("div",{className:"main__profile profile",children:[(0,c.jsxs)("div",{className:"profile__data",children:[(0,c.jsxs)("div",{className:"profile__left",children:[(0,c.jsx)("div",{className:"profile__img",children:(0,c.jsx)("img",{src:null!==e&&void 0!==e&&null!==(n=e.profile)&&void 0!==n&&null!==(l=n.photos)&&void 0!==l&&l.large?null===e||void 0===e||null===(t=e.profile)||void 0===t||null===(s=t.photos)||void 0===s?void 0:s.large:h,alt:"avatar"})}),!e.isOwner&&(0,c.jsx)(U.Z,{accept:"image/*",customRequest:function(n){var l=n.onSuccess,o=n.file;return e.savePhoto(o).then((function(){l("OK")}))},onChange:function(e){"uploading"!==e.file.status&&P(e.file),"done"===e.file.status?S.ZP.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&S.ZP.error("".concat(e.file.name," file upload failed."))},listType:"picture",defaultFileList:N,children:(0,c.jsx)(b.ZP,{icon:(0,c.jsx)(C.Z,{}),children:"Click to Upload"})}),(0,c.jsx)(x,(0,o.Z)({},e))]}),(0,c.jsx)("div",{className:"profile__right",children:f?(0,c.jsx)(k,{profile:e.profile,onUpdateProfile:e.onUpdateProfile,onEditMode:function(){v(!1)}}):(0,c.jsx)(_,{profile:e.profile,onEditMode:function(){v(!0)}})})]}),!r.userId&&(0,c.jsx)(p,{})]})},A=l(1548),F=l(7781);function V(e){return e.profilePage.profile}function w(e){return e.profilePage.status}var I=["setUserProfile","setUserStatus","updateUserStatusThunk","updateProfile","savePhoto"];var J=(0,F.qC)((0,r.$j)((function(e){return{profile:V(e),status:w(e)}}),{setUserProfile:s.et,setUserStatus:s.Tq,updateUserStatusThunk:s.Gk,savePhoto:s.Ju,updateProfile:s.ck}),A.D)((function(e){var n=e.setUserProfile,l=e.setUserStatus,s=e.updateUserStatusThunk,r=e.updateProfile,a=e.savePhoto,u=(0,t.Z)(e,I),d=(0,m.UO)();return(0,i.useEffect)((function(){u.auth.isAuth&&!d.userId?(n(u.auth.id),l(u.auth.id)):(n(d.userId),l(d.userId))}),[d.userId]),(0,c.jsx)(y,(0,o.Z)((0,o.Z)({},u),{},{isOwner:!!d.userId,onUpdateStatus:function(e){s(e)},savePhoto:a,onUpdateProfile:function(e){return r(e)}}))}))},3545:function(e,n,l){l.d(n,{Z:function(){return i}});var o=l(1413),t=(l(2791),l(1134)),s=l(184);var r=function(e){var n=e.btnText,l=e.isValid;return(0,s.jsx)("button",{className:"".concat("btn-form"," ").concat(l?"":"btn-form_disabled"),children:n})};var i=function(e){var n=e.type,l=e.onSubmit,i=(0,t.cI)({mode:"onChange"}),a=i.register,u=i.handleSubmit,c=i.reset,d=i.formState.isValid,f="dialogs"===n?"dialogs":"post"===n&&"post";return(0,s.jsxs)("form",{onSubmit:u((function(e){l(e),c()})),children:[(0,s.jsx)("div",{children:(0,s.jsx)("textarea",(0,o.Z)({},a(f,{required:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})))}),(0,s.jsx)(r,{isValid:d,btnText:"post"===f?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442":"dialogs"===f&&"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})]})}},1548:function(e,n,l){l.d(n,{D:function(){return a}});var o=l(1413),t=(l(2791),l(8687)),s=l(7689),r=l(184),i=function(e){return{auth:e.auth}},a=function(e){return(0,t.$j)(i)((function(n){return n.auth.isAuth?(0,r.jsx)(e,(0,o.Z)({},n)):(0,r.jsx)(s.Fg,{to:"/login"})}))}},5158:function(){},5953:function(e,n,l){e.exports=l.p+"static/media/user.23a6fea9bd13118beec9.jpg"}}]);
//# sourceMappingURL=772.6bac915e.chunk.js.map