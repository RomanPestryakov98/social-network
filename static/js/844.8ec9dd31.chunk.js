"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[844],{5141:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var a=s(1413),n=s(5987),r=s(6070),i=s(8687),o=s(2791),u=s.p+"static/media/avatar.ff96f4143020bb9b54cc.jpg",l=s(184);var c=function(t){return(0,l.jsxs)("li",{className:"post",children:[(0,l.jsx)("img",{src:u,className:"post__avatar",alt:"avatar"}),(0,l.jsx)("p",{className:"post__message",children:t.message})]})},f=s(3545);var d=function(t){var e=t.profilePage,s=t.onSubmit;return(0,l.jsxs)("div",{className:"my-posts",children:[(0,l.jsx)("h2",{className:"my-posts__title",children:"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"}),(0,l.jsx)(f.Z,{type:"post",onSubmit:s}),(0,l.jsx)("ul",{className:"my-posts__list",children:e.posts.map((function(t,e){return(0,l.jsx)(c,{avatar:t.avatar,message:t.message},e)}))})]})};var p=(0,i.$j)((function(t){return{profilePage:t.profilePage}}),{actionAddPostCreator:r.Uf})((function(t){return(0,l.jsx)(d,(0,a.Z)((0,a.Z)({},t),{},{onSubmit:function(e){t.actionAddPostCreator(e.post)}}))})),v=s(5953),h=s(9439);var m=function(t){var e=(0,o.useState)(t.status),s=(0,h.Z)(e,2),a=s[0],n=s[1],r=(0,o.useState)(!1),i=(0,h.Z)(r,2),u=i[0],c=i[1];return(0,o.useEffect)((function(){n(t.status)}),[t.status]),(0,l.jsx)("div",{children:u?(0,l.jsx)("input",{autoFocus:!0,onBlur:function(){t.onUpdateStatus(a),c(!1)},onChange:function(t){n(t.target.value)},value:a}):(0,l.jsx)("span",{onDoubleClick:function(){c(!0)},children:t.status?t.status:"\u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"})})},j=s(7689);var x=function(t){var e,s,n,r,i,o=(0,j.UO)();return(0,l.jsxs)("div",{className:"main__profile profile",children:[(0,l.jsxs)("div",{className:"profile__data",children:[(0,l.jsx)("h2",{className:"profile__name",children:null===t||void 0===t||null===(e=t.profile)||void 0===e?void 0:e.fullName}),(0,l.jsx)("div",{className:"profile__img",children:(0,l.jsx)("img",{src:null!==t&&void 0!==t&&null!==(s=t.profile)&&void 0!==s&&null!==(n=s.photos)&&void 0!==n&&n.large?null===t||void 0===t||null===(r=t.profile)||void 0===r||null===(i=r.photos)||void 0===i?void 0:i.large:v,alt:"avatar"})}),!t.isOwner&&(0,l.jsx)("input",{type:"file",onChange:function(e){e.target.files.length>0&&t.savePhoto(e.target.files[0])}}),(0,l.jsx)(m,(0,a.Z)({},t))]}),!o.userId&&(0,l.jsx)(p,{})]})},g=s(1548),b=s(7781);function _(t){return t.profilePage.profile}function S(t){return t.profilePage.status}var P=["setUserProfile","setUserStatus","updateUserStatusThunk","savePhoto"];var U=(0,b.qC)((0,i.$j)((function(t){return{profile:_(t),status:S(t)}}),{setUserProfile:r.et,setUserStatus:r.Tq,updateUserStatusThunk:r.Gk,savePhoto:r.Ju}),g.D)((function(t){var e=t.setUserProfile,s=t.setUserStatus,r=t.updateUserStatusThunk,i=t.savePhoto,u=(0,n.Z)(t,P),c=(0,j.UO)();return(0,o.useEffect)((function(){u.auth.isAuth&&!c.userId?(e(u.auth.id),s(u.auth.id)):(e(c.userId),s(c.userId))}),[c.userId]),(0,l.jsx)(x,(0,a.Z)((0,a.Z)({},u),{},{isOwner:!!c.userId,onUpdateStatus:function(t){r(t)},savePhoto:i}))}))},3545:function(t,e,s){s.d(e,{Z:function(){return o}});var a=s(1413),n=(s(2791),s(1134)),r=s(184);var i=function(t){var e=t.btnText,s=t.isValid;return(0,r.jsx)("button",{className:"".concat("btn-form"," ").concat(s?"":"btn-form_disabled"),children:e})};var o=function(t){var e=t.type,s=t.onSubmit,o=(0,n.cI)({mode:"onChange"}),u=o.register,l=o.handleSubmit,c=o.reset,f=o.formState.isValid,d="dialogs"===e?"dialogs":"post"===e&&"post";return(0,r.jsxs)("form",{onSubmit:l((function(t){s(t),c()})),children:[(0,r.jsx)("div",{children:(0,r.jsx)("textarea",(0,a.Z)({},u(d,{required:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})))}),(0,r.jsx)(i,{isValid:f,btnText:"post"===d?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442":"dialogs"===d&&"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})]})}},1548:function(t,e,s){s.d(e,{D:function(){return u}});var a=s(1413),n=(s(2791),s(8687)),r=s(7689),i=s(184),o=function(t){return{auth:t.auth}},u=function(t){return(0,n.$j)(o)((function(e){return e.auth.isAuth?(0,i.jsx)(t,(0,a.Z)({},e)):(0,i.jsx)(r.Fg,{to:"/login"})}))}},5953:function(t,e,s){t.exports=s.p+"static/media/user.23a6fea9bd13118beec9.jpg"}}]);
//# sourceMappingURL=844.8ec9dd31.chunk.js.map